repos:
  # Usage: pre-commit run autoupdate --hook-stage manual
  - repo: local
    hooks:
      - id: autoupdate
        name: autoupdate
        entry: pre-commit autoupdate
        language: system
        always_run: true
        pass_filenames: false
        stages: [manual]

  - repo: https://github.com/norwoodj/helm-docs
    rev: v1.14.2
    hooks:
      - id: helm-docs-built
        args:
          - --chart-search-root=charts
          - --values-file=values.yaml
          - --template-files=../templates/_helpers.gotmpl
          - --template-files=../templates/README.md.gotmpl
          - --sort-values-order=file
          - --documentation-strict-mode
          - --documentation-strict-ignore-absent-regex=.*\.enabled
          - --documentation-strict-ignore-absent-regex=.*\.image\..*

  - repo: local
    hooks:
      - id: sync-chart-docs
        name: Sync Chart Documentation
        description: Automatically sync charts with MkDocs documentation
        entry: uv run python scripts/sync-chart-docs.py
        language: system
        files: ^(charts/.*/(Chart\.yaml|values\.yaml)|mkdocs\.yml)$
        pass_filenames: false
        stages: [pre-commit]
