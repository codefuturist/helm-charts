â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ˜ pgAdmin 4 Successfully Deployed! ğŸ‰                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ QUICK REFERENCE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  Release Name:    {{ .Release.Name }}
  Namespace:       {{ include "pgadmin.namespace" . }}
  Chart Version:   {{ .Chart.Version }}
  App Version:     {{ .Chart.AppVersion }}
  Controller:      {{ .Values.controller.type }}
{{- if .Values.persistence.enabled }}
  Persistence:     âœ“ Enabled ({{ .Values.persistence.size }})
{{- else }}
  Persistence:     âœ— Disabled
{{- end }}
{{- if .Values.pgadmin.serverDefinitions }}
  Pre-configured:  {{ len .Values.pgadmin.serverDefinitions.servers }} server(s)
{{- end }}

ğŸŒ ACCESS YOUR PGADMIN INSTANCE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
{{- if .Values.ingress.enabled }}
{{- range $host := .Values.ingress.hosts }}
  {{- range .paths }}

  ğŸ”— http{{ if $.Values.ingress.tls }}s{{ end }}://{{ $host.host }}{{ .path }}
  {{- end }}
{{- end }}
{{- else if contains "NodePort" .Values.service.type }}

  Run these commands to get the URL:

  export NODE_PORT=$(kubectl get --namespace {{ include "pgadmin.namespace" . }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ include "pgadmin.fullname" . }})
  export NODE_IP=$(kubectl get nodes --namespace {{ include "pgadmin.namespace" . }} -o jsonpath="{.items[0].status.addresses[0].address}")
  echo "ğŸ”— http://$NODE_IP:$NODE_PORT"
{{- else if contains "LoadBalancer" .Values.service.type }}

  â³ Waiting for LoadBalancer IP (this may take a few minutes)...

  Watch status: kubectl get --namespace {{ include "pgadmin.namespace" . }} svc -w {{ include "pgadmin.fullname" . }}

  Get URL:
  export SERVICE_IP=$(kubectl get svc --namespace {{ include "pgadmin.namespace" . }} {{ include "pgadmin.fullname" . }} --template "{{"{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}"}}")
  echo "ğŸ”— http://$SERVICE_IP:{{ .Values.service.port }}"
{{- else if contains "ClusterIP" .Values.service.type }}

  Port-forward to access locally:

  export POD_NAME=$(kubectl get pods --namespace {{ include "pgadmin.namespace" . }} -l "app.kubernetes.io/name={{ include "pgadmin.name" . }},app.kubernetes.io/instance={{ .Release.Name }}" -o jsonpath="{.items[0].metadata.name}")
  kubectl --namespace {{ include "pgadmin.namespace" . }} port-forward $POD_NAME 8080:80

  Then visit: ğŸ”— http://127.0.0.1:8080
{{- end }}

ğŸ” LOGIN CREDENTIALS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  Email:    {{ .Values.pgadmin.email }}
  Password: {{ if .Values.pgadmin.existingSecret }}<stored in secret: {{ .Values.pgadmin.existingSecret }}>{{ else }}<the password you configured>{{ end }}
{{- if .Values.pgadmin.serverDefinitions }}

âœ… PRE-CONFIGURED SERVERS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  {{ len .Values.pgadmin.serverDefinitions.servers }} PostgreSQL server(s) are pre-configured and ready to use.
  They will appear in the browser tree after login.
{{- end }}

ğŸ’¡ HELPFUL COMMANDS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  # View pods
  kubectl get pods --namespace {{ include "pgadmin.namespace" . }} -l app.kubernetes.io/instance={{ .Release.Name }}

  # View logs
  kubectl logs --namespace {{ include "pgadmin.namespace" . }} -l app.kubernetes.io/instance={{ .Release.Name }} -f

  # Get all resources
  kubectl get all --namespace {{ include "pgadmin.namespace" . }} -l app.kubernetes.io/instance={{ .Release.Name }}
{{- if .Values.persistence.enabled }}

  # Check persistent volume claim
  kubectl get pvc --namespace {{ include "pgadmin.namespace" . }} {{ include "pgadmin.fullname" . }}
{{- end }}
{{- if not .Values.persistence.enabled }}

âš ï¸  WARNING: PERSISTENCE DISABLED
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  Persistence is disabled. All configurations, saved queries, and preferences
  will be LOST when the pod restarts.

  ğŸ“ Enable persistence for production:
     helm upgrade {{ .Release.Name }} codefuturist/pgadmin \
       --set persistence.enabled=true \
       --set persistence.size=1Gi \
       --reuse-values
{{- end }}
{{- if and (not .Values.pgadmin.existingSecret) (eq .Values.pgadmin.password "") }}

âŒ ERROR: NO PASSWORD CONFIGURED
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  You must set pgadmin.password or use pgadmin.existingSecret!

  ğŸ“ Set password:
     helm upgrade {{ .Release.Name }} codefuturist/pgadmin \
       --set pgadmin.password=YourSecurePassword123 \
       --reuse-values
{{- end }}

ğŸ“š DOCUMENTATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  Chart README:     https://github.com/codefuturist/helm-charts/tree/main/charts/pgadmin
  pgAdmin Docs:     https://www.pgadmin.org/docs/
  Configuration:    https://www.pgadmin.org/docs/pgadmin4/latest/container_deployment.html
  Support:          https://github.com/codefuturist/helm-charts/issues

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
                              Happy Database Managing! ğŸš€
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
