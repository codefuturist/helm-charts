# home-assistant

![Version: 1.0.0](https://img.shields.io/badge/Version-1.0.0-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 2024.11.1](https://img.shields.io/badge/AppVersion-2024.11.1-informational?style=flat-square)

A comprehensive Helm chart for Home Assistant - Open source home automation that puts local control and privacy first

**Homepage:** <https://www.home-assistant.io/>

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| codefuturist | <58808821+codefuturist@users.noreply.github.com> |  |

## Source Code

* <https://github.com/home-assistant/core>
* <https://github.com/codefuturist/helm-charts>

## Requirements

| Repository | Name | Version |
|------------|------|---------|
| file://../../libs/common | common | 2.x.x |

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| affinity | object | `{}` | Affinity rules |
| configuration.enabled | bool | `false` | Enable automated configuration setup When enabled, creates ConfigMaps and init container to manage HA config files |
| configuration.forceInit | bool | `false` | Force initialization on every start Merges default config with existing config.yaml (keeps 10 most recent backups) |
| configuration.initContainer | object | `{"image":"mikefarah/yq:4","name":"setup-config","securityContext":{"runAsUser":0},"volumeMounts":[]}` | Init container configuration |
| configuration.initContainer.image | string | `"mikefarah/yq:4"` | Init container image (needs yq tool) |
| configuration.initContainer.name | string | `"setup-config"` | Init container name |
| configuration.initContainer.securityContext | object | `{"runAsUser":0}` | Init container security context |
| configuration.initContainer.volumeMounts | list | `[]` | Additional volume mounts for init container |
| configuration.initScript | string | `"#!/bin/bash\nset -e\n\n# Create configuration file if it doesn't exist\nif [ ! -f /config/configuration.yaml ]; then\n  echo \\\"Configuration file not found, creating from template\\\"\n  cp /config-templates/configuration.yaml /config/configuration.yaml\nfi\n\n# Handle forceInit mode\nforceInit=\\\"{{ .Values.configuration.forceInit }}\\\"\nif [ \\\"$forceInit\\\" = \\\"true\\\" ]; then\n  echo \\\"Force init enabled, merging configuration\\\"\n  current_time=$(date +%Y%m%d_%H%M%S)\n  echo \\\"Backing up current config to configuration.yaml.$current_time\\\"\n  cp /config/configuration.yaml /config/configuration.yaml.$current_time\n\n  echo \\\"Cleaning up old backups (keeping 10 most recent)\\\"\n  ls -t /config/configuration.yaml.* 2>/dev/null | tail -n +11 | xargs -r rm\n\n  if [[ ! -s /config/configuration.yaml ]]; then\n    cat /config-templates/configuration.yaml > /config/configuration.yaml\n  else\n    yq eval-all --inplace 'select(fileIndex == 0) *d select(fileIndex == 1)' /config/configuration.yaml /config-templates/configuration.yaml\n  fi\nfi\n\n# Create required YAML files if missing\nfor file in automations.yaml scripts.yaml scenes.yaml; do\n  if [ ! -f /config/$file ]; then\n    echo \\\"Creating $file\\\"\n    echo \\\"[]\\\" > /config/$file\n  fi\ndone"` | Init script for configuration management Executed before Home Assistant starts |
| configuration.templateConfig | string | `"# Loads default set of integrations. Do not remove.\ndefault_config:\n\n{{- if or .Values.ingress.enabled }}\nhttp:\n  use_x_forwarded_for: true\n  trusted_proxies:\n    {{- range .Values.configuration.trusted_proxies }}\n    - {{ . }}\n    {{- end }}\n{{- end }}\n\n# Load frontend themes from the themes folder\nfrontend:\n  themes: !include_dir_merge_named themes\n\nautomation: !include automations.yaml\nscript: !include scripts.yaml\nscene: !include scenes.yaml"` | Template for configuration.yaml file Uses Go templating with access to .Values |
| configuration.trusted_proxies | list | `["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","127.0.0.0/8"]` | Trusted proxy CIDR ranges for reverse proxy setups Add your ingress controller or load balancer IP ranges |
| extraContainers | list | `[]` | Sidecar containers |
| extraVolumeMounts | object | `[]` | Extra volume mounts |
| extraVolumes | object | `[]` | Extra volumes |
| initContainers | list | `[]` | Init containers |
| podAnnotations | object | `{}` |  |
| podDisruptionBudget.enabled | bool | `false` | Enable PodDisruptionBudget |
| podDisruptionBudget.minAvailable | int | `1` |  |
| rbac.create | bool | `true` | Create RBAC resources |
| serviceAccount.annotations | object | `{}` | Annotations for service account |
| serviceAccount.create | bool | `true` | Create service account |
| serviceAccount.name | string | `""` | Service account name |
| tolerations | list | `[]` | Tolerations |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.14.2](https://github.com/norwoodj/helm-docs/releases/v1.14.2)
