# Minimal configuration for production use
# Uses API key authentication (recommended)

replicaCount: 2

bitwarden:
  server: "https://vault.bitwarden.com"
  auth:
    useApiKey: true
    existingSecret:
      name: "bitwarden-credentials"

api:
  existingSecret:
    name: "bitwarden-api-token"

cache:
  enabled: true
  ttl: 120

externalSecretsOperator:
  createClusterSecretStore: true
  secretStore:
    name: "bitwarden"

resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 200m
    memory: 256Mi

affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
    - weight: 100
      podAffinityTerm:
        labelSelector:
          matchExpressions:
          - key: app.kubernetes.io/name
            operator: In
            values:
            - bitwarden-eso-provider
        topologyKey: kubernetes.io/hostname
