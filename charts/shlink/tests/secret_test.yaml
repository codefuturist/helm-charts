suite: Shlink secret template
templates:
  - secret.yaml
tests:
  - it: renders secret with API key and GeoLite license
    set:
      shlink:
        initialApiKey: "test-admin-key"
        geoLiteLicenseKey: "geo-test-key"
    asserts:
      - equal:
          path: data.initial-api-key
          value: dGVzdC1hZG1pbi1rZXk=
      - equal:
          path: data.geolite-license-key
          value: Z2VvLXRlc3Qta2V5

  - it: does not render secret when an existing secret is provided
    set:
      shlink:
        existingSecret: precreated-secret
    asserts:
      - hasDocuments:
          count: 0
