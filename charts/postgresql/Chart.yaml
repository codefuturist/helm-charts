apiVersion: v2
name: postgresql
description: A production-ready Helm chart for PostgreSQL database with advanced features including replication, backups, monitoring, and security

type: application

# Helm chart Version
version: 1.7.1

# Application version
appVersion: "16.4"

keywords:
  - postgresql
  - postgres
  - database
  - sql
  - kubernetes
  - replication
  - backup
  - monitoring

home: https://www.postgresql.org/
sources:
  - https://github.com/postgres/postgres
  - https://github.com/codefuturist/helm-charts

maintainers:
  - name: codefuturist
    email: 58808821+codefuturist@users.noreply.github.com

icon: https://wiki.postgresql.org/images/a/a4/PostgreSQL_logo.3colors.svg

annotations:
  # Changelog
  artifacthub.io/changes: |
    - kind: added
      description: Easy database recovery with interactive recovery script
    - kind: added
      description: One-command full backup recovery
    - kind: added
      description: Point-in-Time Recovery (PITR) via recovery script
    - kind: added
      description: Recovery Job for automated restore on install/upgrade
    - kind: added
      description: List backups command in recovery script
    - kind: added
      description: Recovery status monitoring and log viewing
    - kind: added
      description: Comprehensive recovery documentation (RECOVERY_GUIDE.md)
    - kind: added
      description: Example recovery values files (full and PITR)
    - kind: improved
      description: User-friendly recovery process with guided wizards
    - kind: added
      description: Lifecycle hooks for graceful shutdown
    - kind: added
      description: Kubernetes-friendly annotations (Prometheus, Reloader)
    - kind: added
      description: Enhanced pod labels for better filtering
    - kind: added
      description: Auto-reload support for config/secret changes
    - kind: added
      description: Istio DestinationRule for traffic management
    - kind: added
      description: Support for StatefulSet with volumeClaimTemplates
    - kind: added
      description: Improved secret management with lookup function
    - kind: added
      description: PostgreSQL extensions support
    - kind: added
      description: Pre-upgrade backup hooks
    - kind: added
      description: Pod anti-affinity and topology spread constraints
    - kind: added
      description: Improved health probes with pg_isready
    - kind: added
      description: Better backup error handling and validation
    - kind: added
      description: Values JSON schema validation
    - kind: security
      description: Secure password management for additional users
    - kind: security
      description: Added POSTGRES_HOST_AUTH_METHOD control
    - kind: security
      description: PVC retention policy to prevent data loss
  # Screenshots
  artifacthub.io/screenshots: |
    - title: PostgreSQL Dashboard
      url: https://grafana.com/api/dashboards/9628/images/6114/image
  # Links
  artifacthub.io/links: |
    - name: Chart Source
      url: https://github.com/codefuturist/helm-charts/tree/main/charts/postgresql
    - name: PostgreSQL Documentation
      url: https://www.postgresql.org/docs/
  # Security
  artifacthub.io/containsSecurityUpdates: "true"
  # Recommended configuration
  artifacthub.io/recommendations: |
    - url: https://artifacthub.io/packages/helm/bitnami/postgresql
  # Operator
  artifacthub.io/operator: "false"
  # Kubernetes Versions
  artifacthub.io/kubeVersion: ">=1.21.0-0"
  # Category
  artifacthub.io/category: "database"
  # Sign Key
  artifacthub.io/signKey: |
    fingerprint: ""
    url: ""
  artifacthub.io/prerelease: "false"
