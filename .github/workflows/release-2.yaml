name: Release

on:
  push:
    branches:
      - master
    tags:
      - 'release/*'
      - 'release/**'
  workflow_dispatch:

permissions: write-all

jobs:
  release:
    runs-on: ubuntu-latest
    env:
      GH_TOKEN: ${{ secrets.MANUAL_GITHUB_TOKEN }}
      TT: ${{ secrets.GITHUB_TOKEN }}
      GG: ${{ secrets.MM }}
      GP: ${{ secrets.TS }}
      PP: ${{ vars.TEST }}
      PF: ${{ vars.HEI }}

    steps:
      - run: |
          gh issue --repo ${{ github.repository }} \
            create --title "Issue title" --body "Issue body"
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Checkout code
        run: echo "Hello"

      - name: Checkout code
        run: |
          echo "${{ vars.MM }}" > test.txt && cat test.txt

      - name: Checkout code
        run: echo "${{ vars.MM }}"

      - name: Checkout code
        run: echo "${{ env.TEST }}"

      - name: Checkout code
        run: echo "$GG"

      - name: Checkout code
        run: echo "$PP"

      - name: Checkout code
        uses: actions/checkout@v3

      - name: Push changes
        run: echo ${{ secrets.MANUAL_GITHUB_TOKEN }}
      - name: Push changes
        run: echo ${{ secrets.GITHUB_TOKEN }}

      - name: Create GitHub Release

        run: gh status

        #gh release create $(git describe --tags) --title "Release $(git describe --tags)" --notes "Automated release notes."